{% extends 'base.html' %}
{% block title %}{{ category.name }}{% endblock %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <a href="{{ url_for('main.products') }}" class="text-decoration-none">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
  <span class="text-muted">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ category.name }}</span>
</div>

<h2 class="mb-4">{{ category.name }}</h2>

<div class="row g-4">
  {% for product in products %}
    <div class="col-12 col-md-6 col-xl-4">
      <div class="card h-100 shadow-sm">
        <a href="{{ url_for('main.product_detail', product_id=product.id) }}" class="text-decoration-none text-dark">
          <img src="{{ product.image_url or '/static/default.jpg' }}" alt="{{ product.name }}"
               class="card-img-top" style="height: 220px; object-fit: cover;">
          <div class="card-body pb-2">
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="mb-1">–ü–æ—Å—Ç–∞–≤—â–∏–∫: {{ product.supplier_name or "‚Äî" }}</p>
            <p class="mb-0"><b>{{ product.price }} ‚ÇΩ</b></p>
          </div>
        </a>
        <div class="px-3 pb-3 d-flex gap-2 justify-content-end">
          <button
            type="button"
            class="btn btn-sm btn-outline-primary"
            data-preorder-btn
            data-product-id="{{ product.id }}"
            data-product-name="{{ product.name }}"
            data-product-price="{{ product.price }}"
            data-product-supplier="{{ product.supplier_name or '‚Äî' }}"
            data-product-image="{{ product.image_url or '' }}"
            data-product-category-id="{{ product.category_id }}"
          >üõí –ë—Ä–æ–Ω—å</button>
          <button
            type="button"
            class="btn btn-sm btn-outline-danger"
            data-like-btn
            data-product-id="{{ product.id }}"
            data-product-name="{{ product.name }}"
            data-product-price="{{ product.price }}"
            data-product-supplier="{{ product.supplier_name or '‚Äî' }}"
            data-product-image="{{ product.image_url or '' }}"
            data-product-category-id="{{ product.category_id }}"
          >‚ù§Ô∏è –õ–∞–π–∫</button>
        </div>
      </div>
    </div>
  {% else %}
    <div class="col-12">
      <div class="alert alert-info mb-0">–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤.</div>
    </div>
  {% endfor %}
</div>

{% endblock %}
